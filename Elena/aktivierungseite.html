<!DOCTYPE html>
<html lang="de">
<head>
    <!-- Zeichencodierung auf UTF-8, damit Sonderzeichen wie Umlaute korrekt dargestellt werden können -->
    <meta charset="UTF-8">
    
    <!-- Viewport-Einstellungen für responsives Design, damit  Seite auf mobilen Geräten korrekt dargestellt wird -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>Aktivierung deines Kontos</title>
    
    <!-- CSS-Styles für die Seite definieren -->
    <style>
        body { 
            font-family: Arial, sans-serif; /* Setzt die Schriftart auf Arial und stellt eine Fallback-Schriftart ein */
            text-align: center; /* Zentriert den Text auf der Seite */
            margin-top: 50px; /* Fügt oben einen Abstand von 50px hinzu */
        }
        .container { 
            width: 300px; /* Legt die Breite des Containers auf 300px fest */
            margin: auto; /* Zentriert den Container horizontal */
            padding: 20px; /* Fügt 20px Innenabstand um den Inhalt des Containers hinzu */
            border: 1px solid #ccc; /* Definiert eine graue Umrandung für den Container */
            border-radius: 5px; /* Macht die Ecken des Containers abgerundet */
        }
        button { 
            padding: 10px 20px; /* Fügt dem Button Innenabstand von 10px oben/unten und 20px links/rechts hinzu */
            background: blue; /* Setzt die Hintergrundfarbe des Buttons auf Blau */
            color: white; /* Setzt die Textfarbe des Buttons auf Weiß */
            border: none; /* Entfernt den Rand des Buttons */
            cursor: pointer; /* Ändert den Mauszeiger in eine Hand, wenn man über den Button fährt */
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Überschrift für die Seite -->
        <h2>Aktivierung deines Kontos</h2>
        <!-- Text, der den Benutzer informiert, dass das Konto aktiviert wird -->
        <p>Bitte warte, während wir dein Konto aktivieren...</p>
        
        <!-- Button, der beim Klicken die Funktion activateAccount() aufruft -->
        <button onclick="activateAccount()">Aktiviere Konto</button>
    </div>
    
    <!-- JavaScript zur Verarbeitung der Kontosaktivierung -->
    <script>
        function activateAccount() {
            // Holt die URL-Parameter aus der aktuellen Seite (z.B. ?email=beispiel@example.com)
            const urlParams = new URLSearchParams(window.location.search);
            // Extrahiert die E-Mail-Adresse aus den URL-Parametern
            const email = urlParams.get('email'); // E-Mail aus der URL holen
            
            // Prüft, ob eine E-Mail-Adresse in der URL vorhanden ist
            if (email) {
                // Sendet eine POST-Anfrage an die Datei 'activate.php' mit der E-Mail im JSON-Format
                fetch('activate.php', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' }, // Gibt an, dass die Daten als JSON gesendet werden
                    body: JSON.stringify({ email: email }) // Der Body enthält die E-Mail als JSON
                })
                // Wenn die Antwort erfolgreich ist, wird sie als JSON verarbeitet
                .then(response => response.json())
                .then(data => {
                    // Zeigt eine Nachricht aus der Antwort an (z.B. Erfolg oder Fehler)
                    alert(data.message);
                    
                    // Wenn die Aktivierung erfolgreich war, wird der Benutzer zur Login-Seite weitergeleitet
                    if (data.success) {
                        window.location.href = "login_registrierung.html";
                    }
                })
                // Falls ein Fehler bei der Anfrage auftritt, wird eine Fehlermeldung angezeigt
                .catch(error => alert('Fehler: ' + error));
            } else {
                // Falls keine E-Mail in der URL gefunden wurde, wird eine Warnung ausgegeben
                alert("Kein Aktivierungslink gefunden.");
            }
        }
    </script>
</body>
</html>
