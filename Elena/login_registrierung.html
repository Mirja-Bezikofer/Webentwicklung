<!DOCTYPE html>
<html lang="de">
<head>
    <!-- Zeichencodierung auf UTF-8 setzen, um Sonderzeichen wie Umlaute korrekt darzustellen -->
    <meta charset="UTF-8">
    
    <!-- Viewport-Einstellungen für responsives Design, damit die Seite auf mobilen Geräten korrekt dargestellt wird -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- Titel der Webseite, der im Tab des Browsers angezeigt wird -->
    <title>Login & Registrierung</title>
    
    <!-- CSS-Styles für die Seite definieren -->
    <style>
        body { 
            font-family: Arial, sans-serif; /* Setzt die Schriftart auf Arial und stellt eine Fallback-Schriftart ein */
            text-align: center; /* Zentriert den Text auf der Seite */
        }
        .container { 
            width: 300px; /* Legt die Breite des Containers auf 300px fest */
            margin: auto; /* Zentriert den Container horizontal */
            padding: 20px; /* Fügt 20px Innenabstand um den Inhalt des Containers hinzu */
            border: 1px solid #ccc; /* Definiert eine graue Umrandung für den Container */
            border-radius: 5px; /* Macht die Ecken des Containers abgerundet */
        }
        input { 
            width: 100%; /* Setzt die Breite der Eingabefelder auf 100% der Containerbreite */
            padding: 8px; /* Fügt dem Eingabefeld Innenabstand von 8px hinzu */
            margin: 5px 0; /* Fügt einen Abstand von 5px oben und unten zwischen den Eingabefeldern hinzu */
        }
        button { 
            width: 100%; /* Setzt die Breite des Buttons auf 100% der Containerbreite */
            padding: 8px; /* Fügt dem Button Innenabstand von 8px hinzu */
            background: blue; /* Setzt die Hintergrundfarbe des Buttons auf Blau */
            color: white; /* Setzt die Textfarbe des Buttons auf Weiß */
            border: none; /* Entfernt den Rand des Buttons */
            cursor: pointer; /* Ändert den Mauszeiger in eine Hand, wenn man über den Button fährt */
        }
    </style>
</head>
<body>
    <!-- Login-Container, enthält das Login-Formular -->
    <div class="container" id="login-container">
        <h2>Login</h2>
        <!-- Eingabefeld für die E-Mail-Adresse -->
        <input type="email" id="login-email" placeholder="Deine E-Mail" required>
        <!-- Eingabefeld für das Passwort -->
        <input type="password" id="login-password" placeholder="Dein Passwort" required>
        <!-- Button, der die Funktion login() beim Klicken aufruft -->
        <button onclick="login()">Login</button>
        <!-- Link, der die Registrierungsmasken anzeigt -->
        <p>Du hast noch kein Konto? <a href="#" onclick="showRegister()">Registriere dich hier.</a></p>
    </div>

    <!-- Registrierung-Container, enthält das Registrierungs-Formular -->
    <div class="container" id="register-container" style="display: none;">
        <h2>Registrierung</h2>
        <!-- Eingabefeld für die E-Mail-Adresse -->
        <input type="email" id="register-email" placeholder="Deine E-Mail" required>
        <!-- Eingabefeld für das Passwort -->
        <input type="password" id="register-password" placeholder="Dein Passwort" required>
        <!-- Button, der die Funktion register() beim Klicken aufruft -->
        <button onclick="register()">Registrieren</button>
        <!-- Link, der zur Login-Seite wechselt -->
        <p>Du hast bereits ein Konto? <a href="#" onclick="showLogin()">Logge dich hier ein.</a></p>
    </div>

    <script>
        // Funktion für den Login-Prozess
        function login() {
            // Holt die Werte aus den Eingabefeldern für E-Mail und Passwort
            let email = document.getElementById('login-email').value;
            let password = document.getElementById('login-password').value;
            
            // Sendet eine POST-Anfrage mit den Login-Daten (E-Mail und Passwort) an den Server
            fetch('login.php', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' }, // Gibt an, dass die Daten im JSON-Format gesendet werden
                body: JSON.stringify({ email: email, password: password }) // Der Body enthält die Login-Daten als JSON
            })
            // Wenn die Antwort erfolgreich ist, wird sie als JSON verarbeitet
            .then(response => response.json())
            .then(data => {
                // Zeigt eine Nachricht aus der Antwort an (z.B. Erfolg oder Fehler)
                alert(data.message);
                
                // Wenn der Login erfolgreich war, wird der Benutzer zur Homepage weitergeleitet
                if (data.success) {
                    window.location.href = "test_homepage.html";
                }
            })
            // Falls ein Fehler bei der Anfrage auftritt, wird eine Fehlermeldung angezeigt
            .catch(error => alert('Fehler: ' + error));
        }

        // Funktion für den Registrierungsprozess
        function register() {
            // Holt die Werte aus den Eingabefeldern für E-Mail und Passwort
            let email = document.getElementById('register-email').value;
            let password = document.getElementById('register-password').value;
            
            // Sendet eine POST-Anfrage mit den Registrierungsdaten (E-Mail und Passwort) an den Server
            fetch('register.php', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' }, // Gibt an, dass die Daten im JSON-Format gesendet werden
                body: JSON.stringify({ email: email, password: password }) // Der Body enthält die Registrierungsdaten als JSON
            })
            // Wenn die Antwort erfolgreich ist, wird sie als JSON verarbeitet
            .then(response => response.json())
            .then(data => {
                // Zeigt eine Nachricht aus der Antwort an (z.B. Erfolg oder Fehler)
                alert(data.message);
                
                // Wenn die Registrierung erfolgreich war, wird der Benutzer zur Aktivierungsseite weitergeleitet
                if (data.success) {
                    window.location.href = `aktivierungsseite.html?email=${encodeURIComponent(email)}`;
                }
            })
            // Falls ein Fehler bei der Anfrage auftritt, wird eine Fehlermeldung angezeigt
            .catch(error => alert('Fehler: ' + error));
        }

        // Funktion, um die Registrierungsmaske anzuzeigen und die Login-Maske auszublenden
        function showRegister() {
            document.getElementById('login-container').style.display = 'none';
            document.getElementById('register-container').style.display = 'block';
        }

        // Funktion, um die Login-Maske anzuzeigen und die Registrierungsmaske auszublenden
        function showLogin() {
            document.getElementById('register-container').style.display = 'none';
            document.getElementById('login-container').style.display = 'block';
        }
    </script>
</body>
</html>
